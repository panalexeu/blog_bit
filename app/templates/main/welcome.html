{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block page_header %}
    <h1>Welcome, {% if current_user.is_authenticated %} {{ current_user.username }} {% else %} stranger {% endif %}
        !</h1>
{% endblock %}

{% block page_content %}
    <div>
        {% if current_user.can(Permission.WRITE) %}
            {{ wtf.quick_form(form) }}
        {% endif %}
    </div>
    <ul class="posts">
        {% for post in posts %}
            <li class="post">

                <div class="profile-thumbnail">
                    <a href="{{ url_for('main.profile', username=post.author.username) }}">
                        <img class="img-rounded profile-thumbnail"
                             src="{{ post.author.get_pfp(size=40) }}"
                             alt="{{ post.author.username }} profile picture">
                    </a>
                </div>

                <div class="post-date">{{ moment(post.timestamp).fromNow() }}</div>

                <div class="post-author">
                    <a href="{{ url_for('main.profile', username=post.author.username) }}">
                        {{ post.author.username }}
                    </a>
                </div>

                <div class="post-content">{{ post.body }}</div>
            </li>
        {% endfor %}
    </ul>
{% endblock %}